"use strict";var ServerDate=function(t){function e(){return this?e:e.toString()}function n(t,e){this.value=t,this.precision=e}function o(t){var n,o="Set target to "+String(t);h&&(o+=" ("+(t>h?"+":"-")+" "+Math.abs(t-h)+" ms)"),h=t,a(o+"."),(n=Math.abs(h-u))>e.amortizationThreshold&&(a("Difference between target and offset too high ("+n+" ms); skipping amortization."),u=h)}function i(){function t(){var c=new XMLHttpRequest;c.open("HEAD",f+"?noCache="+Date.now()),c.onreadystatechange=function(){this.readyState==this.HEADERS_RECEIVED&&200==this.status&&(i=Date.now())},c.onload=function(){if(200==this.status)try{!function(c){var u=(i-e)/2,g=new n(c+u-i,u);a("sample: "+s+", offset: "+String(g)),(1==s||u<=r.precision)&&(r=g);s<10?(s++,t()):(o(r),m=!1)}(new Date(this.getResponseHeader("Date")).getTime())}catch(t){a("Unable to read the server's response.")}},e=Date.now(),c.send()}var e,i,r,s=1;m||(m=!0,setTimeout(function(){m=!1},1e4),t())}function a(t){console&&console.log&&console.log("[ServerDate] "+t)}var r,s,c,u,g=Date.now(),l=document.getElementsByTagName("script"),f=l[l.length-1].src,h=null,m=!1;return e.parse=Date.parse,e.UTC=Date.UTC,e.now=function(){return Date.now()+u},["toString","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","valueOf","getTime","getFullYear","getUTCFullYear","getMonth","getUTCMonth","getDate","getUTCDate","getDay","getUTCDay","getHours","getUTCHours","getMinutes","getUTCMinutes","getSeconds","getUTCSeconds","getMilliseconds","getUTCMilliseconds","getTimezoneOffset","toUTCString","toISOString","toJSON"].forEach(function(t){e[t]=function(){return new Date(e.now())[t]()}}),e.getPrecision=function(){if(void 0!==h.precision)return h.precision+Math.abs(h-u)},e.amortizationRate=25,e.amortizationThreshold=2e3,Object.defineProperty(e,"synchronizationIntervalDelay",{get:function(){return r},set:function(t){r=t,clearInterval(s),s=setInterval(i,e.synchronizationIntervalDelay),a("Set synchronizationIntervalDelay to "+t+" ms.")}}),e.synchronizationIntervalDelay=36e5,n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value+(void 0!==this.precision?" +/- "+this.precision:"")+" ms"},u=t-g,"undefined"!=typeof performance&&(c=(g-performance.timing.domLoading)/2,u+=c),o(new n(u,c)),setInterval(function(){var t=Math.max(-e.amortizationRate,Math.min(e.amortizationRate,h-u));u+=t,t&&a("Offset adjusted by "+t+" ms to "+u+" ms (target: "+h.value+" ms).")},1e3),window.addEventListener("pageshow",i),i(),e}(Date.now());